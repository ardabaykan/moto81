<!doctype html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Moto 81</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0VV359BDQY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0VV359BDQY');
    </script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom CSS -->
    <style>
        :root{
            --bg: #ffffff;
            --text:#0a0a0a;
            --muted:#6c757d; /* Bootstrap muted color */
            --btn-bg:#e6e6e6;
            --btn-dark:#cfcfcf;
            --accent:#f8f9fa; /* Bootstrap light gray */
            --shadow: 0 6px 18px rgba(12,12,12,0.08);
        }
        body{
            font-family: 'Inter', sans-serif;
            background:var(--bg);
            color:var(--text);
            line-height:1.45;
        }

        /* Header / Navbar Customizations */
        .navbar{
            position:sticky;
            top:0;
            z-index:1030; /* Bootstrap navbar z-index */
            background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
            backdrop-filter:blur(4px);
            border-bottom:1px solid #eee;
        }
        .navbar-brand{
            font-weight:700;
            font-size:1.25rem; /* Bootstrap default */
        }
        .nav-link{
            padding:8px 12px;
            border-radius:8px;
            cursor:pointer;
        }
        .nav-link:hover{
            background:var(--accent);
        }
        .nav-item .nav-link.active {
            background: var(--accent);
            font-weight: 600;
        }

        /* Mini cart */
        .mini-cart{
            position:fixed;
            right:1rem;
            top:1rem;
            z-index:1050; /* Higher than Bootstrap dropdown default */
        }
        .cart-button{
            display:flex;
            align-items:center;
            gap:8px;
            border:0;
            background:transparent;
            cursor:pointer;
            padding: .375rem .75rem; /* Bootstrap btn padding */
            border-radius: .375rem; /* Bootstrap btn border-radius */
        }
        .cart-button:hover{
            background-color: var(--accent);
        }
        .cart-count{
            background:#0a0a0a;
            color:#fff;
            padding:2px 6px;
            border-radius:999px;
            font-size:12px;
        }
        .cart-dropdown{
            width:320px;
            max-height:420px;
            overflow-y:auto;
            /* Bootstrap dropdown-menu styling handles most of this */
        }
        .cart-item{
            display:flex;
            gap:10px;
            align-items:center;
            padding:8px 0;
            border-bottom:1px dashed #f0f0f0;
        }
        .cart-item:last-child{
            border-bottom:0;
        }
        .cart-item img{
            width:48px;
            height:48px;
            object-fit:cover;
            border-radius:6px;
        }
        .cart-meta{
            flex:1;
        }
        .cart-meta b{
            display:block;
        }
        .cart-total{
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding-top:8px;
            margin-top: 10px;
            border-top: 1px solid #eee;
        }
        .cart-dropdown .btn {
            font-size: 0.875rem; /* Smaller buttons in cart */
            padding: .25rem .5rem;
        }


        /* Main content */
        main{
            margin-top:22px;
        }

        .hero-section{
            text-align:center;
            padding: 20px 0; /* Adjusted padding */
            background-color: #f8f8f8;
            border-radius: 12px;
            margin-bottom: 22px;
        }
        .hero-section img{
            max-width: 300px;
            height: auto;
            margin-bottom: 5px;
            margin-top: 10px;
        }
        .hero-section h1{
            margin-top: 0;
            font-size: 2rem; /* Bootstrap h1 default */
            margin-bottom: .5rem;
        }
        .hero-section p{
            color:var(--muted);
            font-size:1rem;
        }

        /* Product Cards */
        .card{
            transition:transform .18s ease, box-shadow .18s ease;
            display:flex;
            flex-direction:column;
            gap:10px;
            border-radius: 12px;
            border: 1px solid #f0f0f0;
        }
        .card:hover{
            transform:translateY(-6px);
            box-shadow:var(--shadow);
        }

        .thumb {
            width: 100%;
            height: 180px;
            border-top-left-radius: calc(12px - 1px); /* Match card border-radius */
            border-top-right-radius: calc(12px - 1px);
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .thumb img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background-color: #fff;
        }
        .card-body{
            display: flex;
            flex-direction: column;
            gap: 6px;
            padding-top: 0.75rem; /* Bootstrap default card-body padding */
        }
        .card-title{
            font-weight:600;
            margin-bottom: 0;
        }
        .card-text.brand-text{
            font-size:13px;
            color:var(--muted);
        }
        .card-text.price-text{
            font-weight:700;
            font-size: 1.1rem;
            margin-top: 5px;
        }
        .actions{
            margin-top:auto;
            display:flex;
            align-items:center;
            gap:10px;
            padding: 0 1.25rem 1.25rem 1.25rem; /* Adjust to match card-body horizontal padding */
        }
        .actions .btn{
            width: 100%;
        }


        /* Footer */
        footer{
            padding:24px 0;
            text-align:center;
            color:var(--muted);
            border-top:1px solid #f0f0f0;
            margin-top:28px;
        }

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .hero-section h1 {
                font-size: 1.5rem;
            }
            .hero-section img {
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid container">
                <a class="navbar-brand" href="#">Moto 81</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav me-auto mb-2 mb-lg-0">
                        <a class="nav-link active" aria-current="page" href="#" data-category="all">Tüm Ürünler</a>
                        <a class="nav-link" href="#" data-category="pcx">PCX Aksesuarları</a>
                        <a class="nav-link" href="#" data-category="nmax">NMAX Aksesuarları</a>
                        <a class="nav-link" href="odeme.html">Ödeme</a>
                    </div>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Ürün ara..." aria-label="Ürün ara" id="searchInput">
                    </form>
                </div>
            </div>
        </nav>
    </header>

    <div class="mini-cart dropdown">
        <button class="cart-button btn btn-light dropdown-toggle" type="button" id="cartToggle" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 6h15l-1.5 9h-12L6 6z" stroke="#0a0a0a" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="cart-count" id="cartCount">0</span>
        </button>
        <div class="dropdown-menu dropdown-menu-end cart-dropdown" aria-labelledby="cartToggle">
            <div class="px-3 py-2" id="cartItems">
                <!-- Cart items will be rendered here by JS -->
                <div class="muted text-center py-2">Sepetiniz boş</div>
            </div>
            <div class="px-3 py-2">
                <div class="cart-total">
                    <div class="muted">Toplam</div>
                    <div id="cartTotal">0.00 ₺</div>
                </div>
                <div class="d-flex justify-content-end gap-2 mt-3">
                    <button class="btn btn-outline-secondary" id="clearCart">Temizle</button>
                    <button class="btn btn-primary" id="checkoutBtn">Satın Al</button>
                </div>
            </div>
        </div>
    </div>

    <main class="container">
        <section class="hero-section">
            <img src="logo.png" alt="Moto 81 Logo">
            <h1>Moto 81'e Hoş Geldiniz</h1>
            <p>Motor aksesuarları ve yedek parçalarda aradığınız her şey burada!</p>
        </section>

        <section class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4" id="productGrid"></section>
    </main>

    <footer class="mt-5 py-4 bg-light">
        <div class="container text-center text-muted">
            © 2025 Moto 81 - Tüm Hakları Saklıdır
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        const products = [
            // Your product data here (same as before)
            {id:1, name:'Artçı Demir 24', brand:'Moto 81', price:1600.00, img:'nmaxdemir.jpg', category:'nmax'},
            {id:2, name:'Depo Kapağı 24', brand:'Moto 81', price:800.00, img:'nmaxdepo.jpg', category:'nmax'},
            {id:3, name:'Şeffaf Filtre Kapağı 24-25', brand:'Moto 81', price:2700.00, img:'nmaxfiltre.jpg', category:'nmax'},
            {id:4, name:'Karbon Filtre Kapağı 24-25', brand:'Moto 81', price:2500.00, img:'nmaxfiltrekarbon.jpg', category:'nmax'},
            {id:5, name:'Gidon Kapağı', brand:'Moto 81', price:1400.00, img:'nmaxgidon.jpg', category:'nmax'},
            {id:6, name:'Kontak Kapağı', brand:'Moto 81', price:1600.00, img:'nmaxkontak.jpg', category:'nmax'},
            {id:7, name:'Radyatör Kapağı 24-25', brand:'Moto 81', price:1800.00, img:'nmaxradyator.jpg', category:'nmax'},
            {id:8, name:'Sinyal Üstü Kapağı', brand:'Moto 81', price:1800.00, img:'nmaxsinyalustu.jpg', category:'nmax'},
            {id:9, name:'Stop Altı Kapağı', brand:'Moto 81', price:900.00, img:'nmaxstopalti.jpg', category:'nmax'},
            {id:10, name:'Varyatör Kapağı', brand:'Moto 81', price:2500.00, img:'nmaxvaryator.jpg', category:'nmax'},

            {id:11, name:'PCX Headers', brand:'Moto 81', price:3000.00, img:'pcxheaders.jpg', category:'pcx'},
            {id:12, name:'Pcx 2025 Ön V', brand:'Moto 81', price:2200.00, img:'pcx2025onv.jpg', category:'pcx'},
            {id:13, name:'Pcx Karbon Egzoz', brand:'Moto 81', price:1700.00, img:'pcxegzozset.jpg', category:'pcx'},
            {id:14, name:'Pcx Çamurluk', brand:'Moto 81', price:2250.00, img:'pcxoncamurluk.jpg', category:'pcx'},
            {id:15, name:'Pcx Füme Filtre', brand:'Moto 81', price:1650.00, img:'pcxfumefiltre.jpg', category:'pcx'},
            {id:16, name:'Pcx Şeffaf Filtre', brand:'Moto 81', price:1650.00, img:'pcxseffaffiltre.jpg', category:'pcx'},
            {id:17, name:'Pcx Şeffaf Radyatör', brand:'Moto 81', price:1550.00, img:'pcxseffafradyator.jpg', category:'pcx'},
            {id:18, name:'Pcx Karbon Varyatör', brand:'Moto 81', price:1650.00, img:'pcxkarbonvaryator.jpg', category:'pcx'},
            {id:19, name:'Pcx Şeffaf Varyatör', brand:'Moto 81', price:1650.00, img:'pcxseffafvaryator.jpg', category:'pcx'},
            {id:20, name:'Pcx 2024 Ön V', brand:'Moto 81', price:2200.00, img:'pcx2024onv.jpg', category:'pcx'},
            {id:21, name:'Pcx Karbon Tutamaç', brand:'Moto 81', price:2500.00, img:'pcxarkademir.jpg', category:'pcx'},

            {id:22, name:'Nmax Çerçeve 25', brand:'Moto 81', price:2200.00, img:'nmaxgostergecercevesi.jpg', category:'nmax'},
            {id:23, name:'Nmax Winglet 25', brand:'Moto 81', price:1500.00, img:'nmax2025altwinglet.jpg', category:'nmax'},
            {id:24, name:'Nmax Ön Panel 24', brand:'Moto 81', price:2300.00, img:'nmaxoncam.jpg', category:'nmax'},
            {id:25, name:'Nmax Kontak (2) 25', brand:'Moto 81', price:1500.00, img:'nmax2025kontakalt.jpg', category:'nmax'},
            {id:26, name:'Nmax Gidon 25', brand:'Moto 81', price:2400.00, img:'nmax2025gidonkarbon.jpg', category:'nmax'},
            {id:27, name:'Nmax Kontak (1) 25', brand:'Moto 81', price:1500.00, img:'nmax2025kontakust.jpg', category:'nmax'},
            {id:28, name:'Nmax Ön V 25', brand:'Moto 81', price:2000.00, img:'nmax2025onpanelv.jpg', category:'nmax'},
            {id:29, name:'Nmax Radyatör 25', brand:'Moto 81', price:1850.00, img:'nmaxradyator2025.jpeg', category:'nmax'},
            {id:30, name:'Nmax Depo 25', brand:'Moto 81', price:1300.00, img:'nmax2025benzindepokapak.jpg', category:'nmax'},
            {id:31, name:'Nmax Depo Çerçeve 25', brand:'Moto 81', price:1950.00, img:'Nmax2025benzindepocevresi.jpg', category:'nmax'},
            {id:32, name:'Nmax Varyatör 24', brand:'Moto 81', price:2400.00, img:'nmaxvaryator.jpg', category:'nmax'},
        
            {id:33, name:'Nmax Ön Panel 25', brand:'Moto 81', price:2350.00, img:'nmaxoncam2025.jpg', category:'nmax'}
        ];

        const CART_KEY = 'moto81_cart_v1';
        let cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]');

        const productGrid = document.getElementById('productGrid');
        const cartCount = document.getElementById('cartCount');
        const cartItemsEl = document.getElementById('cartItems');
        const cartTotalEl = document.getElementById('cartTotal');
        const searchInput = document.getElementById('searchInput');
        const categoryLinks = document.querySelectorAll('.navbar-nav .nav-link[data-category]');
        const clearCartBtn = document.getElementById('clearCart');
        const checkoutBtn = document.getElementById('checkoutBtn'); // Yeni checkout butonu

        function money(num){
            return Number(num).toLocaleString('tr-TR', {minimumFractionDigits:2, maximumFractionDigits:2}) + ' ₺';
        }

        function renderProducts(list = products){
            productGrid.innerHTML = '';
            list.forEach(p => {
                const col = document.createElement('div');
                col.className = 'col'; // Bootstrap grid column
                col.innerHTML = `
                    <div class="card h-100">
                        <div class="thumb">
                            <img src="${p.img}" class="card-img-top" alt="${p.name}">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">${p.name}</h5>
                            <p class="card-text brand-text">${p.brand}</p>
                            <p class="card-text price-text">${money(p.price)}</p>
                        </div>
                        <div class="actions">
                            <button class="btn btn-primary add-to-cart-btn" data-id="${p.id}">Sepete Ekle</button>
                        </div>
                    </div>
                `;
                productGrid.appendChild(col);
            });
        }

        function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }

        function updateCartUI(){
            cartCount.textContent = cart.reduce((s,i) => s + i.qty, 0);
            cartItemsEl.innerHTML = '';
            
            if(cart.length === 0){
                cartItemsEl.innerHTML = '<div class="muted text-center py-2">Sepetiniz boş</div>';
                cartTotalEl.textContent = money(0);
                return;
            }

            cart.forEach(item =>{
                const el = document.createElement('div');
                el.className = 'cart-item';
                el.innerHTML = `
                    <img alt="${item.name}" src="${item.img}">
                    <div class="cart-meta">
                        <b>${item.name}</b>
                        <div class="muted">${item.brand} · ${money(item.price)} x ${item.qty}</div>
                    </div>
                    <div class="d-flex flex-column gap-1 align-items-end">
                        <button data-id="${item.id}" class="btn btn-sm btn-outline-secondary decrease-qty-btn">-</button>
                        <button data-id="${item.id}" class="btn btn-sm btn-outline-danger remove-item-btn">x</button>
                    </div>
                `;
                cartItemsEl.appendChild(el);
            });

            const total = cart.reduce((s,i)=> s + i.price * i.qty, 0);
            cartTotalEl.textContent = money(total);
            saveCart(); // Save after updating total
        }

        function addToCart(productId){
            const p = products.find(x=>x.id===productId);
            if(!p) return;
            const existing = cart.find(c=>c.id===productId);
            if(existing){ existing.qty +=1; }
            else{ cart.push({id:p.id,name:p.name,brand:p.brand,price:p.price,qty:1,img:p.img}); }
            
            updateCartUI();
            
            // Basic animation for cart button
            const cartButton = document.getElementById('cartToggle');
            cartButton.classList.add('animate__animated', 'animate__pulse'); // Assuming animate.css or similar
            setTimeout(() => {
                cartButton.classList.remove('animate__animated', 'animate__pulse');
            }, 500);
        }

        // Event delegation for product grid and cart
        document.body.addEventListener('click', e=>{
            // Add to Cart button
            const add = e.target.closest('.add-to-cart-btn');
            if(add){ addToCart(parseInt(add.dataset.id)); }

            // Clear Cart button
            if(e.target === clearCartBtn){
                cart = [];
                updateCartUI();
            }

            // Checkout button (within mini-cart)
            if(e.target === checkoutBtn){
                window.location.href = "odeme.html";
            }

            // Remove item from cart
            const remove = e.target.closest('.remove-item-btn');
            if(remove){
                const id = parseInt(remove.dataset.id);
                cart = cart.filter(i=>i.id!==id);
                updateCartUI();
            }

            // Decrease item quantity
            const decrease = e.target.closest('.decrease-qty-btn');
            if(decrease){
                const id = parseInt(decrease.dataset.id);
                const item = cart.find(i=>i.id===id);
                if(item){
                    item.qty = Math.max(1, item.qty -1);
                    if (item.qty === 0) { // If quantity becomes 0, remove item
                        cart = cart.filter(i=>i.id!==id);
                    }
                    updateCartUI();
                }
            }
        });

        // Category filtering
        categoryLinks.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default link behavior
                const category = e.target.dataset.category;
                
                categoryLinks.forEach(li => li.classList.remove('active'));
                e.target.classList.add('active');

                let filteredProducts = products;
                if (category !== 'all') {
                    filteredProducts = products.filter(p => p.category === category);
                }
                
                renderProducts(filteredProducts);
                searchInput.value = ''; // Clear search input on category change
            });
        });

        // Search filter
        searchInput.addEventListener("input", ()=>{
            const val = searchInput.value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(val) || p.brand.toLowerCase().includes(val));
            renderProducts(filtered);
            
            // Remove active class from categories when searching
            categoryLinks.forEach(li => li.classList.remove('active'));
        });
        
        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            // Set 'Tüm Ürünler' as active by default on load
            document.querySelector('.navbar-nav .nav-link[data-category="all"]').click();
            updateCartUI();
        });
    </script>
</body>
</html>
